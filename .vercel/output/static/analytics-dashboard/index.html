<!DOCTYPE html><html lang="es" data-astro-cid-zw5ppcgk> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Analytics Dashboard - Portfolio Martin</title><style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;margin:0;padding:20px;background:#0f172a;color:#e2e8f0}.container[data-astro-cid-zw5ppcgk]{max-width:1200px;margin:0 auto}.header[data-astro-cid-zw5ppcgk]{margin-bottom:30px}.stats-grid[data-astro-cid-zw5ppcgk]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[data-astro-cid-zw5ppcgk]{background:#1e293b;padding:20px;border-radius:8px;border:1px solid #334155}.stat-value[data-astro-cid-zw5ppcgk]{font-size:2rem;font-weight:700;color:#3b82f6}.stat-label[data-astro-cid-zw5ppcgk]{color:#94a3b8;margin-top:5px}.chart-container[data-astro-cid-zw5ppcgk]{background:#1e293b;padding:20px;border-radius:8px;border:1px solid #334155;margin-bottom:20px}.table[data-astro-cid-zw5ppcgk]{width:100%;border-collapse:collapse}.table[data-astro-cid-zw5ppcgk] th[data-astro-cid-zw5ppcgk],.table[data-astro-cid-zw5ppcgk] td[data-astro-cid-zw5ppcgk]{text-align:left;padding:12px;border-bottom:1px solid #334155}.table[data-astro-cid-zw5ppcgk] th[data-astro-cid-zw5ppcgk]{color:#cbd5e1;font-weight:600}.loading[data-astro-cid-zw5ppcgk]{text-align:center;color:#94a3b8;padding:40px}.error[data-astro-cid-zw5ppcgk]{color:#ef4444;padding:20px;background:#7f1d1d;border-radius:8px;margin-bottom:20px}.refresh-btn[data-astro-cid-zw5ppcgk]{background:#3b82f6;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;margin-left:10px}.refresh-btn[data-astro-cid-zw5ppcgk]:hover{background:#2563eb}
</style><script>window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
		var script = document.createElement('script');
		script.defer = true;
		script.src = '/_vercel/insights/script.js';
		var head = document.querySelector('head');
		head.appendChild(script);
	</script></head> <body data-astro-cid-zw5ppcgk> <div class="container" data-astro-cid-zw5ppcgk> <div class="header" data-astro-cid-zw5ppcgk> <h1 data-astro-cid-zw5ppcgk>📊 Analytics Dashboard</h1> <p data-astro-cid-zw5ppcgk>Informe de interacciones del portfolio</p> <button class="refresh-btn" onclick="loadAnalytics()" data-astro-cid-zw5ppcgk>🔄 Actualizar</button> </div> <div id="loading" class="loading" data-astro-cid-zw5ppcgk>
Cargando datos de analytics...
</div> <div id="error" class="error" style="display: none;" data-astro-cid-zw5ppcgk></div> <div id="dashboard" style="display: none;" data-astro-cid-zw5ppcgk> <!-- Basic Stats --> <div class="stats-grid" data-astro-cid-zw5ppcgk> <div class="stat-card" data-astro-cid-zw5ppcgk> <div class="stat-value" id="totalVisitors" data-astro-cid-zw5ppcgk>-</div> <div class="stat-label" data-astro-cid-zw5ppcgk>Visitantes Únicos (7 días)</div> </div> <div class="stat-card" data-astro-cid-zw5ppcgk> <div class="stat-value" id="totalPageViews" data-astro-cid-zw5ppcgk>-</div> <div class="stat-label" data-astro-cid-zw5ppcgk>Vistas de Página</div> </div> <div class="stat-card" data-astro-cid-zw5ppcgk> <div class="stat-value" id="totalInteractions" data-astro-cid-zw5ppcgk>-</div> <div class="stat-label" data-astro-cid-zw5ppcgk>Interacciones</div> </div> <div class="stat-card" data-astro-cid-zw5ppcgk> <div class="stat-value" id="avgSessionDuration" data-astro-cid-zw5ppcgk>-</div> <div class="stat-label" data-astro-cid-zw5ppcgk>Duración Promedio (seg)</div> </div> </div> <!-- Language Distribution --> <div class="chart-container" data-astro-cid-zw5ppcgk> <h3 data-astro-cid-zw5ppcgk>📊 Distribución de Idiomas</h3> <div id="languageStats" data-astro-cid-zw5ppcgk></div> </div> <!-- Most Viewed Sections --> <div class="chart-container" data-astro-cid-zw5ppcgk> <h3 data-astro-cid-zw5ppcgk>👀 Secciones Más Visitadas</h3> <table class="table" data-astro-cid-zw5ppcgk> <thead data-astro-cid-zw5ppcgk> <tr data-astro-cid-zw5ppcgk> <th data-astro-cid-zw5ppcgk>Sección</th> <th data-astro-cid-zw5ppcgk>Visualizaciones</th> <th data-astro-cid-zw5ppcgk>%</th> </tr> </thead> <tbody id="sectionsTable" data-astro-cid-zw5ppcgk></tbody> </table> </div> <!-- Daily Stats --> <div class="chart-container" data-astro-cid-zw5ppcgk> <h3 data-astro-cid-zw5ppcgk>📈 Estadísticas Diarias</h3> <table class="table" data-astro-cid-zw5ppcgk> <thead data-astro-cid-zw5ppcgk> <tr data-astro-cid-zw5ppcgk> <th data-astro-cid-zw5ppcgk>Fecha</th> <th data-astro-cid-zw5ppcgk>Visitantes</th> <th data-astro-cid-zw5ppcgk>Vistas</th> <th data-astro-cid-zw5ppcgk>Interacciones</th> </tr> </thead> <tbody id="dailyTable" data-astro-cid-zw5ppcgk></tbody> </table> </div> <!-- Device Stats --> <div class="chart-container" data-astro-cid-zw5ppcgk> <h3 data-astro-cid-zw5ppcgk>📱 Estadísticas de Dispositivos</h3> <div id="deviceStats" data-astro-cid-zw5ppcgk></div> </div> <!-- Top Referrers --> <div class="chart-container" data-astro-cid-zw5ppcgk> <h3 data-astro-cid-zw5ppcgk>🔗 Principales Referentes</h3> <table class="table" data-astro-cid-zw5ppcgk> <thead data-astro-cid-zw5ppcgk> <tr data-astro-cid-zw5ppcgk> <th data-astro-cid-zw5ppcgk>Referente</th> <th data-astro-cid-zw5ppcgk>Visitas</th> </tr> </thead> <tbody id="referrersTable" data-astro-cid-zw5ppcgk></tbody> </table> </div> </div> </div> <script type="module">async function a(){const t=document.getElementById("loading"),s=document.getElementById("error"),i=document.getElementById("dashboard");t.style.display="block",s.style.display="none",i.style.display="none";try{const n=await fetch("/api/analytics?report=weekly");if(!n.ok)throw new Error("Failed to fetch analytics");const r=await n.json();c(r),t.style.display="none",i.style.display="block"}catch(n){t.style.display="none",s.style.display="block",s.textContent="Error al cargar los datos: "+n.message}}function c(t){document.getElementById("totalVisitors").textContent=t.summary.totalVisitors,document.getElementById("totalPageViews").textContent=t.summary.totalPageViews,document.getElementById("totalInteractions").textContent=t.summary.totalInteractions,document.getElementById("avgSessionDuration").textContent=t.summary.averageSessionDuration;const s=t.summary.languageDistribution.es+t.summary.languageDistribution.en,i=document.getElementById("languageStats");i.innerHTML=`
                <div style="margin: 10px 0;">
                    🇪🇸 Español: ${t.summary.languageDistribution.es} (${s>0?Math.round(t.summary.languageDistribution.es/s*100):0}%)
                </div>
                <div style="margin: 10px 0;">
                    🇺🇸 English: ${t.summary.languageDistribution.en} (${s>0?Math.round(t.summary.languageDistribution.en/s*100):0}%)
                </div>
            `;const n=document.getElementById("sectionsTable"),r=t.summary.mostViewedSections.reduce((e,y)=>e+y.views,0);n.innerHTML=t.summary.mostViewedSections.map(e=>`
                <tr>
                    <td>${e.section}</td>
                    <td>${e.views}</td>
                    <td>${r>0?Math.round(e.views/r*100):0}%</td>
                </tr>
            `).join("");const l=document.getElementById("dailyTable");l.innerHTML=t.dailyStats.map(e=>`
                <tr>
                    <td>${e.date}</td>
                    <td>${e.visitors}</td>
                    <td>${e.pageViews}</td>
                    <td>${e.interactions}</td>
                </tr>
            `).join("");const m=document.getElementById("deviceStats"),o=t.summary.deviceStats.desktop+t.summary.deviceStats.tablet+t.summary.deviceStats.mobile;m.innerHTML=`
                <div style="margin: 10px 0;">
                    🖥️ Desktop: ${t.summary.deviceStats.desktop} (${o>0?Math.round(t.summary.deviceStats.desktop/o*100):0}%)
                </div>
                <div style="margin: 10px 0;">
                    📱 Tablet: ${t.summary.deviceStats.tablet} (${o>0?Math.round(t.summary.deviceStats.tablet/o*100):0}%)
                </div>
                <div style="margin: 10px 0;">
                    📞 Mobile: ${t.summary.deviceStats.mobile} (${o>0?Math.round(t.summary.deviceStats.mobile/o*100):0}%)
                </div>
            `;const d=document.getElementById("referrersTable");d.innerHTML=t.summary.topReferrers.length>0?t.summary.topReferrers.map(e=>`
                    <tr>
                        <td>${e.referrer}</td>
                        <td>${e.visits}</td>
                    </tr>
                `).join(""):'<tr><td colspan="2">No hay datos de referentes</td></tr>'}a();setInterval(a,300*1e3);</script> </body> </html>