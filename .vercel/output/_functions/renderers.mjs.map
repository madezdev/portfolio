{"version":3,"file":"renderers.mjs","sources":["../../node_modules/@astrojs/react/dist/context.js","../../node_modules/@astrojs/react/dist/static-html.js","../../node_modules/@astrojs/react/dist/server.js"],"sourcesContent":["const contexts = /* @__PURE__ */ new WeakMap();\nconst ID_PREFIX = \"r\";\nfunction getContext(rendererContextResult) {\n  if (contexts.has(rendererContextResult)) {\n    return contexts.get(rendererContextResult);\n  }\n  const ctx = {\n    currentIndex: 0,\n    get id() {\n      return ID_PREFIX + this.currentIndex.toString();\n    }\n  };\n  contexts.set(rendererContextResult, ctx);\n  return ctx;\n}\nfunction incrementId(rendererContextResult) {\n  const ctx = getContext(rendererContextResult);\n  const id = ctx.id;\n  ctx.currentIndex++;\n  return id;\n}\nexport {\n  incrementId\n};\n","import { createElement as h } from \"react\";\nconst StaticHtml = ({\n  value,\n  name,\n  hydrate = true\n}) => {\n  if (!value) return null;\n  const tagName = hydrate ? \"astro-slot\" : \"astro-static-slot\";\n  return h(tagName, {\n    name,\n    suppressHydrationWarning: true,\n    dangerouslySetInnerHTML: { __html: value }\n  });\n};\nStaticHtml.shouldComponentUpdate = () => false;\nvar static_html_default = StaticHtml;\nexport {\n  static_html_default as default\n};\n","import opts from \"astro:react:opts\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom/server\";\nimport { incrementId } from \"./context.js\";\nimport StaticHtml from \"./static-html.js\";\nconst slotName = (str) => str.trim().replace(/[-_]([a-z])/g, (_, w) => w.toUpperCase());\nconst reactTypeof = Symbol.for(\"react.element\");\nconst reactTransitionalTypeof = Symbol.for(\"react.transitional.element\");\nasync function check(Component, props, children) {\n  if (typeof Component === \"object\") {\n    return Component[\"$$typeof\"].toString().slice(\"Symbol(\".length).startsWith(\"react\");\n  }\n  if (typeof Component !== \"function\") return false;\n  if (Component.name === \"QwikComponent\") return false;\n  if (typeof Component === \"function\" && Component[\"$$typeof\"] === Symbol.for(\"react.forward_ref\"))\n    return false;\n  if (Component.prototype != null && typeof Component.prototype.render === \"function\") {\n    return React.Component.isPrototypeOf(Component) || React.PureComponent.isPrototypeOf(Component);\n  }\n  let isReactComponent = false;\n  function Tester(...args) {\n    try {\n      const vnode = Component(...args);\n      if (vnode && (vnode[\"$$typeof\"] === reactTypeof || vnode[\"$$typeof\"] === reactTransitionalTypeof)) {\n        isReactComponent = true;\n      }\n    } catch {\n    }\n    return React.createElement(\"div\");\n  }\n  await renderToStaticMarkup.call(this, Tester, props, children);\n  return isReactComponent;\n}\nasync function getNodeWritable() {\n  let nodeStreamBuiltinModuleName = \"node:stream\";\n  let { Writable } = await import(\n    /* @vite-ignore */\n    nodeStreamBuiltinModuleName\n  );\n  return Writable;\n}\nfunction needsHydration(metadata) {\n  return metadata?.astroStaticSlot ? !!metadata.hydrate : true;\n}\nasync function renderToStaticMarkup(Component, props, { default: children, ...slotted }, metadata) {\n  let prefix;\n  if (this && this.result) {\n    prefix = incrementId(this.result);\n  }\n  const attrs = { prefix };\n  delete props[\"class\"];\n  const slots = {};\n  for (const [key, value] of Object.entries(slotted)) {\n    const name = slotName(key);\n    slots[name] = React.createElement(StaticHtml, {\n      hydrate: needsHydration(metadata),\n      value,\n      name\n    });\n  }\n  const newProps = {\n    ...props,\n    ...slots\n  };\n  const newChildren = children ?? props.children;\n  if (children && opts.experimentalReactChildren) {\n    attrs[\"data-react-children\"] = true;\n    const convert = await import(\"./vnode-children.js\").then((mod) => mod.default);\n    newProps.children = convert(children);\n  } else if (newChildren != null) {\n    newProps.children = React.createElement(StaticHtml, {\n      hydrate: needsHydration(metadata),\n      value: newChildren\n    });\n  }\n  const formState = this ? await getFormState(this) : void 0;\n  if (formState) {\n    attrs[\"data-action-result\"] = JSON.stringify(formState[0]);\n    attrs[\"data-action-key\"] = formState[1];\n    attrs[\"data-action-name\"] = formState[2];\n  }\n  const vnode = React.createElement(Component, newProps);\n  const renderOptions = {\n    identifierPrefix: prefix,\n    formState\n  };\n  let html;\n  if (opts.experimentalDisableStreaming) {\n    html = ReactDOM.renderToString(vnode);\n  } else if (\"renderToReadableStream\" in ReactDOM) {\n    html = await renderToReadableStreamAsync(vnode, renderOptions);\n  } else {\n    html = await renderToPipeableStreamAsync(vnode, renderOptions);\n  }\n  return { html, attrs };\n}\nasync function getFormState({\n  result\n}) {\n  const { request, actionResult } = result;\n  if (!actionResult) return void 0;\n  if (!isFormRequest(request.headers.get(\"content-type\"))) return void 0;\n  const { searchParams } = new URL(request.url);\n  const formData = await request.clone().formData();\n  const actionKey = formData.get(\"$ACTION_KEY\")?.toString();\n  const actionName = searchParams.get(\"_action\");\n  if (!actionKey || !actionName) return void 0;\n  return [actionResult, actionKey, actionName];\n}\nasync function renderToPipeableStreamAsync(vnode, options) {\n  const Writable = await getNodeWritable();\n  let html = \"\";\n  return new Promise((resolve, reject) => {\n    let error = void 0;\n    let stream = ReactDOM.renderToPipeableStream(vnode, {\n      ...options,\n      onError(err) {\n        error = err;\n        reject(error);\n      },\n      onAllReady() {\n        stream.pipe(\n          new Writable({\n            write(chunk, _encoding, callback) {\n              html += chunk.toString(\"utf-8\");\n              callback();\n            },\n            destroy() {\n              resolve(html);\n            }\n          })\n        );\n      }\n    });\n  });\n}\nasync function readResult(stream) {\n  const reader = stream.getReader();\n  let result = \"\";\n  const decoder = new TextDecoder(\"utf-8\");\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) {\n      if (value) {\n        result += decoder.decode(value);\n      } else {\n        decoder.decode(new Uint8Array());\n      }\n      return result;\n    }\n    result += decoder.decode(value, { stream: true });\n  }\n}\nasync function renderToReadableStreamAsync(vnode, options) {\n  return await readResult(await ReactDOM.renderToReadableStream(vnode, options));\n}\nconst formContentTypes = [\"application/x-www-form-urlencoded\", \"multipart/form-data\"];\nfunction isFormRequest(contentType) {\n  const type = contentType?.split(\";\")[0].toLowerCase();\n  return formContentTypes.some((t) => type === t);\n}\nconst renderer = {\n  name: \"@astrojs/react\",\n  check,\n  renderToStaticMarkup,\n  supportsAstroStaticSlot: true\n};\nvar server_default = renderer;\nexport {\n  server_default as default\n};\n"],"names":["h","StaticHtml"],"mappings":"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","x_google_ignoreList":[0,1,2]}